<!DOCTYPE html>

<html>
<head>
  <title>applicationCode.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="applicationCode.html">
                applicationCode.js
              </a>
            
              
              <a class="source" href="routes.html">
                routes.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
              
              <a class="source" href="test-app.html">
                test-app.js
              </a>
            
              
              <a class="source" href="testrunner.html">
                testrunner.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>applicationCode.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p><code>applicateCode.js</code> holds all of the application logic right now.
All functionality goes in here. These can also be moved into separate files
later. Be sure to export any function you write or else it can&#39;t be tested.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">var</span> utils = require(<span class="string">'./utils.js'</span>);

<span class="function"><span class="keyword">function</span> <span class="title">Application</span><span class="params">(db)</span> {</span>

    <span class="function"><span class="keyword">function</span> <span class="title">facebookLoginAction</span><span class="params">(request, response, data)</span> {</span>
        response.send({<span class="string">"hi"</span> : request.user});
    }

    <span class="function"><span class="keyword">function</span> <span class="title">organizationLoginAction</span><span class="params">(request, response, data)</span> {</span>
        response.send({<span class="string">"hi"</span>:
                       <span class="string">'curl -v -d "username=bob&amp;password=secret" http://127.0.0.1:5000/auth/organization'</span>
                      });
    }

    <span class="function"><span class="keyword">function</span> <span class="title">defaultAction</span><span class="params">(request, response)</span> {</span>
        <span class="keyword">if</span>(request.user) {
            response.send({<span class="string">"hello"</span>: <span class="string">"world!"</span>,
                           <span class="string">"logged in as"</span> : request.user});
        } <span class="keyword">else</span> {
            response.send({<span class="string">"hello"</span>: <span class="string">"world!"</span>,
                           <span class="string">"not logged in"</span>: <span class="string">"go to /auth/facebook to log in"</span>});
        }
    }

    <span class="function"><span class="keyword">function</span> <span class="title">nameAction</span><span class="params">(request, response, d)</span> {</span>
        <span class="keyword">if</span>(d.name === <span class="string">"Anand"</span>) {
            response.send(<span class="string">"ANAND IS HERE!!!"</span>);
        }
        response.send({<span class="string">"hello"</span>: d.name});
    }

    <span class="function"><span class="keyword">function</span> <span class="title">postAction</span><span class="params">(request, response, d)</span> {</span>
        <span class="keyword">var</span> data = request.body.stuff;
        <span class="keyword">if</span>(data === d.stuff) {
            response.send({<span class="string">"success"</span>: <span class="literal">true</span>});
        } <span class="keyword">else</span> {
            response.send({<span class="string">"success"</span>: <span class="literal">false</span>});
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>functions exported so we can test them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">return</span> utils.exportFunctions([defaultAction,
                                  nameAction,
                                  postAction,
                                  facebookLoginAction,
                                  organizationLoginAction
                                 ]);
}

module.exports.Application = Application;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
